<!--
=========================================================
* Argon Dashboard 2 - v2.0.4
=========================================================

* Product Page: https://www.creative-tim.com/product/argon-dashboard
* Copyright 2022 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://www.creative-tim.com/license)
* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="es" th:replace="~{layouts/dashboard :: slots(~{::title}, ~{::section}, ~{::script})}">

<head>
  <title>Areco Recicla | Dashboard</title>
</head>

<body>

  <section class="container-fluid py-4 pb-2">
    <div class="row">
      <div class="col-xl-4 col-sm-12 mb-xl-0 mb-4">
        <div class="card">
          <div class="card-body p-3">
            <div class="row">
              <div class="col-8">
                <div class="numbers">
                  <p class="text-sm mb-0 text-uppercase font-weight-bold">Puntos</p>
                  <h5 class="font-weight-bolder" th:if="${currentMonthUserPoints == null}">+0</h5>
                  <h5 class="font-weight-bolder" th:text="|+${#numbers.formatDecimal(currentMonthUserPoints, 1, 2)}|">
                  </h5>
                  <p class="mb-0 text-sm" th:if="${pointsIncrementPercent == 0}">
                    <i class="fa fa-arrow-up text-gray-400"></i>
                    <i class="fa fa-infinity text-gray-400">%</i>
                    de incremento.
                  </p>
                  <p class="mb-0 text-sm" th:if="${pointsIncrementPercent > 0}">
                    <i class="fa fa-arrow-up text-success"></i>
                    <span class="text-success text-sm font-weight-bolder"
                      th:text=" |+${#numbers.formatDecimal(pointsIncrementPercent, 0, 0)}%|">
                      +0%
                    </span>
                    <span class="text-sm">
                      de incremento.
                    </span>
                  </p>
                  <p class="mb-0 text-sm" th:if="${pointsIncrementPercent < 0}">
                    <i class="fa fa-arrow-down text-danger"></i>
                    <span class="text-danger text-sm font-weight-bolder"
                      th:text=" |${#numbers.formatDecimal(pointsIncrementPercent, 0, 0)}%|">
                      +0%
                    </span>
                    <span class="text-sm">
                      de disminución.
                    </span>
                  </p>
                </div>
              </div>
              <div class="col-4 text-end">
                <div class="icon icon-shape bg-success shadow-success text-center rounded-circle">
                  <i class="fas fa-coins text-lg opacity-10" aria-hidden="true"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-4 col-sm-6 mb-xl-0 mb-4">
        <div class="card">
          <div class="card-body p-3">
            <div class="row">
              <div class="col-8">
                <div class="numbers">
                  <p class="text-sm mb-0 text-uppercase font-weight-bold">Reciclables</p>
                  <h5 class="font-weight-bolder" th:if="${currentMonthUserRecyclables == null}">+0</h5>
                  <h5 class="font-weight-bolder"
                    th:text="|+${#numbers.formatDecimal(currentMonthUserRecyclables, 1, 2)} Kg|">
                  </h5>
                  <p class="mb-0 text-sm" th:if="${recyclablesIncrementPercent == 0}">
                    <i class="fa fa-arrow-up text-gray-400"></i>
                    <i class="fa fa-infinity text-gray-400">%</i>
                    de incremento.
                  </p>
                  <p class="mb-0 text-sm" th:if="${recyclablesIncrementPercent > 0}">
                    <i class="fa fa-arrow-up text-success"></i>
                    <span class="text-success text-sm font-weight-bolder"
                      th:text=" |+${#numbers.formatDecimal(recyclablesIncrementPercent, 0, 0)}%|">
                      +0%
                    </span>
                    <span class="text-sm">
                      de incremento.
                    </span>
                  </p>
                  <p class="mb-0 text-sm" th:if="${recyclablesIncrementPercent < 0}">
                    <i class="fa fa-arrow-down text-danger"></i>
                    <span class="text-danger text-sm font-weight-bolder"
                      th:text=" |${#numbers.formatDecimal(recyclablesIncrementPercent, 0, 0)}%|">
                      +0%
                    </span>
                    <span class="text-sm">
                      de disminución.
                    </span>
                  </p>
                </div>
              </div>
              <div class="col-4 text-end">
                <div class="icon icon-shape bg-gradient-danger shadow-danger text-center rounded-circle">
                  <i class="fas fa-dumpster text-lg opacity-10" aria-hidden="true"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-4 col-sm-6 mb-xl-0 mb-4">
        <div class="card">
          <div class="card-body p-3">
            <div class="row">
              <div class="col-8">
                <div class="numbers">
                  <p class="text-sm mb-0 text-uppercase font-weight-bold">Beneficios</p>
                  <h5 class="font-weight-bolder" th:if="${currentMonthUserCoupons == null}">+0</h5>
                  <h5 class="font-weight-bolder" th:text="|+${#numbers.formatDecimal(currentMonthUserCoupons, 1, 0)}|">
                  </h5>
                  <p class="mb-0 text-sm" th:if="${couponsIncrementPercent == 0}">
                    <i class="fa fa-arrow-up text-gray-400"></i>
                    <i class="fa fa-infinity text-gray-400">%</i>
                    de incremento.
                  </p>
                  <p class="mb-0 text-sm" th:if="${couponsIncrementPercent > 0}">
                    <i class="fa fa-arrow-up text-success"></i>
                    <span class="text-success text-sm font-weight-bolder"
                      th:text=" |+${#numbers.formatDecimal(couponsIncrementPercent, 0, 0)}%|">
                      +0%
                    </span>
                    <span class="text-sm">
                      de incremento.
                    </span>
                  </p>
                  <p class="mb-0 text-sm" th:if="${couponsIncrementPercent < 0}">
                    <i class="fa fa-arrow-down text-danger"></i>
                    <span class="text-danger text-sm font-weight-bolder"
                      th:text=" |${#numbers.formatDecimal(couponsIncrementPercent, 0, 0)}%|">
                      +0%
                    </span>
                    <span class="text-sm">
                      de disminución.
                    </span>
                  </p>
                </div>
              </div>
              <div class="col-4 text-end">
                <div class="icon icon-shape bg-primary shadow-primary text-center rounded-circle">
                  <i class="fas fa-gift text-lg opacity-10" aria-hidden="true"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row mt-4">
      <div class="col-lg-7 mb-lg-0 mb-4">
        <div class="card z-index-2 h-100">
          <div class="card-header pb-0 pt-3 bg-transparent">
            <h6 class="text-capitalize">Resumen Reciclables <span class="text-xs">(Anual)</span></h6>
            <p class=" text-sm mb-0" th:if="${yearRecyclablesIncrementPercent == 0}">
              <i class="fa fa-arrow-up text-gray-400"></i>
              <i class="fa fa-infinity text-gray-400">%</i>
              de incremento.
            </p>
            <p class="text-sm mb-0" th:if="${yearRecyclablesIncrementPercent > 0}">
              <i class="fa fa-arrow-up text-success"></i>
              <span class="font-weight-bold text-success"
                th:text=" |+${#numbers.formatDecimal(yearRecyclablesIncrementPercent, 0, 0)}%|">+3%</span> mas que
              el
              año pasado.
            </p>
            <p class="text-sm mb-0" th:if="${yearRecyclablesIncrementPercent < 0}">
              <i class="fa fa-arrow-down text-danger"></i>
              <span class="font-weight-bold text-danger"
                th:text=" |${#numbers.formatDecimal(yearRecyclablesIncrementPercent, 0, 0)}%|">+3%</span> menos
              que
              el
              año pasado.
            </p>
          </div>
          <div class="card-body p-3">
            <div class="chart">
              <canvas id="chart-line" class="chart-canvas" height="300"></canvas>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-5">
        <div class="card card-carousel overflow-hidden h-100 p-0">
          <div id="carouselExampleCaptions" class="carousel slide h-100" data-bs-ride="carousel">
            <div class="carousel-inner border-radius-lg h-100">
              <div class="carousel-item h-100 active position-relative" th:style="'background-image: url(' + @{/img/carousel-1.jpg} + ');
      background-size: cover; background-position: center;'">
                <span class="mask bg-default opacity-6"></span>
                <div class="carousel-caption d-none d-md-block bottom-0 text-start start-0 ms-5">
                  <div class="icon icon-shape icon-sm bg-white text-center border-radius-md mb-3">
                    <i class="fas fa-recycle text-dark opacity-10"></i>
                  </div>
                  <h5 class="text-white text-sm mb-2" style="text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.397);">¿Qué es el
                    reciclaje?</h5>
                  <p class="text-xs" style="text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.397);">
                    El reciclaje es el proceso de convertir los residuos en nuevos materiales que se pueden utilizar. Es
                    una forma de reducir la cantidad de residuos que enviamos a los vertederos y a la incineración, y de
                    conservar los recursos naturales.
                  </p>
                </div>
              </div>
              <div class="carousel-item h-100 position-relative" th:style="'background-image: url(' + @{/img/carousel-2.jpg} + ');
                background-size: cover; background-position: center;'">
                <span class="mask bg-default opacity-6"></span>
                <div class="carousel-caption d-none d-md-block bottom-0 text-start start-0 ms-5">
                  <div class="icon icon-shape icon-sm bg-white text-center border-radius-md mb-3">
                    <i class="fas fa-globe-americas text-dark opacity-10"></i>
                  </div>
                  <h5 class="text-white text-sm mb-2" style="text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.397);">¿Por qué
                    reciclar?</h5>
                  <p class="text-xs" style="text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.397);">El mundo se enfrenta a una
                    crisis de residuos. Cada año, generamos más de 2 mil millones de toneladas de residuos, y la mayoría
                    de ellos acaban en los vertederos o en la incineración. El reciclaje es una forma de reducir esta
                    crisis y proteger el medio ambiente.</p>
                </div>
              </div>
              <div class="carousel-item h-100 position-relative" th:style="'background-image: url(' + @{/img/carousel-3.jpg} + ');
                background-size: cover; background-position: center;'">
                <span class="mask bg-default opacity-6"></span>
                <div class="carousel-caption d-none d-md-block bottom-0 text-start start-0 ms-5">
                  <div class="icon icon-shape icon-sm bg-white text-center border-radius-md mb-3">
                    <i class="fas fa-dumpster text-dark opacity-10"></i>
                  </div>
                  <h5 class="text-white text-sm mb-2" style="text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.397);">¿Qué se
                    puede reciclar?</h5>
                  <p class="text-xs" style="text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.397);">Se pueden reciclar muchos
                    tipos de residuos, entre ellos: papel y cartón, vidrio, plástico, metal, madera, baterías, aceite de
                    cocina usado.</p>
                </div>
              </div>
            </div>
            <button class="carousel-control-prev w-5 me-3" type="button" data-bs-target="#carouselExampleCaptions"
              data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Anterior</span>
            </button>
            <button class="carousel-control-next w-5 me-3" type="button" data-bs-target="#carouselExampleCaptions"
              data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Siguiente</span>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="row mt-4">
      <div class="col-lg-12 mb-lg-0 mb-4">
        <div class="card">
          <div class="card-header pb-0">
            <div class="d-flex justify-content-between">
              <h6 class="mb-2">Historial</h6>
            </div>
          </div>
          <div class="card-body p-3 px-4">
            <ul class="list-group">
              <hr class="horizontal dark mt-0 mb-2" th:if="${!pointsPage.isEmpty()}">
              <hr class="horizontal dark mt-0 mb-3" th:if="${pointsPage.isEmpty()}">
              <div class="d-flex justify-content-center align-items-center" th:if="${pointsPage.isEmpty()}">
                <p class="text-uppercase text-sm">Aún no hay historial</p>
              </div>
              <hr class="horizontal dark mt-0 mb-2" th:if="${pointsPage.isEmpty()}">
              <li th:each="point : ${pointsPage}"
                class="list-group-item border-0 justify-content-between ps-0 mb-2 p-0 border-radius-lg">
                <div class="d-flex gap-2">
                  <div class="d-flex align-items-center">
                    <button th:if="${point.cantidad} > 0"
                      class="btn btn-icon-only btn-rounded btn-outline-success mb-0 me-3 p-3 btn-sm d-flex align-items-center justify-content-center"><i
                        class="fas fa-arrow-up" aria-hidden="true"></i></button>
                    <button th:if="${point.cantidad} <= 0"
                      class="btn btn-icon-only btn-rounded btn-outline-danger mb-0 me-3 p-3 btn-sm d-flex align-items-center justify-content-center"><i
                        class="fas fa-arrow-down" aria-hidden="true"></i></button>
                    <div class="d-flex flex-column">
                      <h6 class="mb-1 text-dark text-sm" th:text=" ${point.descripcion}"></h6>
                      <span class="text-xs text-uppercase" th:text="${#temporals.format(point.creado)}"></span>
                    </div>
                  </div>
                  <div th:if="${point.cantidad} > 0"
                    class="d-flex align-items-center justify-content-center gap-2 text-success text-sm font-weight-bold ms-auto">
                    <span th:text="${#numbers.formatDecimal(point.cantidad, 1, 2)}"></span>
                    <i class="fas fa-coins"></i>
                  </div>
                  <div th:if="${point.cantidad} <= 0"
                    class="d-flex align-items-center justify-content-center gap-2 text-danger text-sm font-weight-bold ms-auto">
                    <span th:text="${#numbers.formatDecimal(point.cantidad, 0, 2)}"></span>
                    <i class="fas fa-coins"></i>
                  </div>
                </div>
                <hr class="horizontal dark mt-2 mb-2">
              </li>
            </ul>
          </div>
        </div>
        <nav class="mt-4" aria-label="Navegacion del Historial de Puntos">
          <ul class="pagination pagination-success justify-content-center">
            <li class="page-item" th:classappend="${pointsPage.first} ? 'disabled' : ''">
              <a class="page-link" tabindex="-1" th:href="@{?page=0}">
                <i class="fa fa-angle-double-left"></i>
                <span class="sr-only">Primera</span>
              </a>
            </li>
            <li class="page-item" th:classappend="${pointsPage.first} ? 'disabled' : ''">
              <a class="page-link" th:with="previousPage=${pointsPage.number - 1}"
                th:href="@{'?page=' + ${previousPage}}" tabindex="-1">
                <i class="fa fa-angle-left"></i>
                <span class="sr-only">Anterior</span>
              </a>
            </li>
            <li class="page-item" th:each="i : ${pageNumbers}"
              th:classappend="${i == pointsPage.number + 1} ? 'active' : ''">
              <a class="page-link" th:with="pageNumber=${i - 1}" th:href="@{'?page=' + ${pageNumber}}" th:text="${i}"
                th:classappend="${i == pointsPage.number + 1} ? 'text-white' : ''"></a>
            </li>
            <li class="page-item" th:classappend="${pointsPage.last} ? 'disabled' : ''">
              <a class="page-link" th:with="nextPage=${pointsPage.number + 1}" th:href="@{'?page=' + ${nextPage}}"
                tabindex="-1">
                <i class="fa fa-angle-right"></i>
                <span class="sr-only">Siguiente</span>
              </a>
            </li>
            <li class="page-item" th:classappend="${pointsPage.last} ? 'disabled' : ''">
              <a class="page-link" tabindex="-1" th:with="lastPage=${pointsPage.totalPages - 1}"
                th:href="@{'?page=' + ${lastPage}}">
                <i class="fa fa-angle-double-right"></i>
                <span class="sr-only">Ultimo</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </section>

  <script th:inline="javascript">
    var ctx1 = document.getElementById("chart-line").getContext("2d");

    var gradientStroke1 = ctx1.createLinearGradient(0, 230, 0, 50);

    /*<![CDATA[*/
    var dataArray = /*[[${currentYearRecyclablesAsArray}]]*/[];
    /*]]>*/

    gradientStroke1.addColorStop(1, 'rgba(45, 206, 137, 0.2)');
    gradientStroke1.addColorStop(0.2, 'rgba(56, 214, 146, 0.0)');
    gradientStroke1.addColorStop(0, 'rgba(67, 224, 157, 0)');
    new Chart(ctx1, {
      type: "line",
      data: {
        labels: ["Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
        datasets: [{
          label: "Kilogramos",
          tension: 0.4,
          borderWidth: 0,
          pointRadius: 0,
          borderColor: "#2dce89",
          backgroundColor: gradientStroke1,
          borderWidth: 3,
          fill: true,
          data: dataArray,
          maxBarThickness: 6

        }],
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: false,
          }
        },
        interaction: {
          intersect: false,
          mode: 'index',
        },
        scales: {
          y: {
            grid: {
              drawBorder: false,
              display: true,
              drawOnChartArea: true,
              drawTicks: false,
              borderDash: [5, 5]
            },
            ticks: {
              display: true,
              padding: 10,
              color: '#fbfbfb',
              font: {
                size: 11,
                family: "Open Sans",
                style: 'normal',
                lineHeight: 2
              },
            }
          },
          x: {
            grid: {
              drawBorder: false,
              display: false,
              drawOnChartArea: false,
              drawTicks: false,
              borderDash: [5, 5]
            },
            ticks: {
              display: true,
              color: '#ccc',
              padding: 20,
              font: {
                size: 11,
                family: "Open Sans",
                style: 'normal',
                lineHeight: 2
              },
            }
          },
        },
      },
    });
  </script>
</body>

</html>